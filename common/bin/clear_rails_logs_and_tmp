#!/bin/bash
#
# Find all the rails projects from this directory down and clear their log
# files to save some space.
#
# modified from http://www.opensourcery.co.za/2008/11/21/clear-the-log-files-of-all-your-rails-projects/
# by @panozzaj on 20101115 to not use rake log:clear (conflicts with Bundler gemsets.)

set -e

if [ -f config/environment.rb ]; then
  echo 'Clearing Rails logs and tmp for the app in this directory...'
  echo rm -f log/*.log
  echo rm -rf tmp
  rm -f log/*.log
  rm -rf tmp
  echo 'Logs and tmp cleared!'
else
  date
  for path in `find /Users/anthonypanozzo/Documents/dev -type f -path '*/config/environment.rb'`
  do
    rails_root=`echo $path | xargs dirname | xargs dirname`
    echo "Found RAILS_ROOT in $rails_root"
    echo rm -f $rails_root/log/*.log
    rm -f $rails_root/log/*.log
    echo
  done
fi
