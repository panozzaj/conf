#!/usr/bin/env bash
set -e

if [[ -z "$1" ]]; then
  echo "Usage: $(basename "$0") <issue-number-or-url>"
  exit 1
fi

issue_number_or_url=$1
issue_number=$(echo $issue_number_or_url | sed -E 's#.*/([0-9]+)$#\1#')
issue_text=$(gh issue view $issue_number --json title --template '{{.title}}')
result="\"$issue_text\" (#$issue_number)"
echo "$result" | pbcopy
echo "$result"
echo -e "\033[32mðŸ“‹ Copied to clipboard.\033[0m"
