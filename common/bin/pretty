#!/usr/bin/env ruby
require 'rubygems'
require 'bundler'
require 'net/http'
require 'ap'
require 'json'
require 'active_model'

include ActiveModel::Serializers::Xml

filename = ARGV[0]
abort "Filename must be provided as the first argument." unless filename

puts "Printing #{filename}"

if filename =~ /\.xml$/
  ap Hash.from_xml(File.read(filename))
end

if filename =~ /\.html$/
  result = `tidy -indent -bare -quiet #{filename}`
  puts "\n\n#{result}"
end

if filename =~ /\.json$/
  ap JSON.parse(File.read(filename))
end
